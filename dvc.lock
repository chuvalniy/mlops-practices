schema: '2.0'
stages:
  clean_data:
    cmd: python src/data/format_data.py data/raw/smoking_driking_dataset_Ver01.csv
      data/interim/format_data.csv
    deps:
    - path: data/raw/smoking_driking_dataset_Ver01.csv
      hash: md5
      md5: 1b1b7bb3e3f428c250798d7e53fc5ec4
      size: 109561668
    - path: src/data/format_data.py
      hash: md5
      md5: 0f4f1474dca7d8a38a4b431075e52dc6
      size: 1419
    outs:
    - path: data/interim/format_data.csv
      hash: md5
      md5: 08e265a99c3e4c4fd2f847bf00d2952b
      size: 139502223
  one_hot_encode_data:
    cmd: python src/data/encode_data.py data/interim/handle_outliers.csv data/processed/processed_data.csv
    deps:
    - path: data/interim/handle_outliers.csv
      hash: md5
      md5: e664d3f89fd1208b427753a78b7e0c1c
      size: 139606060
    - path: src/data/encode_data.py
      hash: md5
      md5: fe9e6cdce97cbae6fe6d1e60356fec0b
      size: 1145
    outs:
    - path: data/processed/processed_data.csv
      hash: md5
      md5: 4ae70a3f6036140b0184fe9258662497
      size: 141450140
  prepare_datasets:
    cmd: python src/models/prepare_datasets.py data/processed/processed_data.csv data/processed/train.csv
      data/processed/val.csv
    deps:
    - path: data/processed/processed_data.csv
      hash: md5
      md5: 4ae70a3f6036140b0184fe9258662497
      size: 141450140
    - path: src/models/prepare_datasets.py
      hash: md5
      md5: f35ce787c87de2a7512f6ae49909cf19
      size: 898
    outs:
    - path: data/processed/train.csv
      hash: md5
      md5: 0c8dba114293e969f435bd50d69a79c7
      size: 99013896
    - path: data/processed/val.csv
      hash: md5
      md5: e9da4c486f5e3422f3ef0b1fe612bfa2
      size: 42436593
  train_model:
    cmd: python src/models/train_model.py data/processed/train.csv data/processed/val.csv
      reports/metrics.json models/model.clf
    deps:
    - path: data/processed/train.csv
      hash: md5
      md5: 0c8dba114293e969f435bd50d69a79c7
      size: 99013896
    - path: data/processed/val.csv
      hash: md5
      md5: e9da4c486f5e3422f3ef0b1fe612bfa2
      size: 42436593
    - path: src/models/train_model.py
      hash: md5
      md5: a5a2983e7fa036c265aaf53d19167ba7
      size: 2928
    outs:
    - path: models/model.clf
      hash: md5
      md5: 6418a8becbbacc79e64691a2ce3bc46a
      size: 5353
    - path: reports/metrics.json
      hash: md5
      md5: e50575c111745328239e9a2102aea696
      size: 77
  remove_outliers:
    cmd: python src/data/remove_outliers.py data/interim/remove_duplicates.csv data/interim/cleaned_data_iqr.csv
    deps:
    - path: data/interim/remove_duplicates.csv
      hash: md5
      md5: 313f52159881476b321d3cb43016acd3
      size: 139498541
    - path: src/data/remove_outliers.py
      hash: md5
      md5: 87de49058bcfca7c53453dd94a78b9dd
      size: 1115
    outs:
    - path: data/interim/cleaned_data_iqr.csv
      hash: md5
      md5: e664d3f89fd1208b427753a78b7e0c1c
      size: 139606060
  remove_duplicates:
    cmd: python src/data/remove_duplicates.py data/interim/format_data.csv data/interim/remove_duplicates.csv
    deps:
    - path: data/interim/format_data.csv
      hash: md5
      md5: 08e265a99c3e4c4fd2f847bf00d2952b
      size: 139502223
    - path: src/data/remove_duplicates.py
      hash: md5
      md5: 35f84f4e968e5b752586e881f7d4990b
      size: 600
    outs:
    - path: data/interim/remove_duplicates.csv
      hash: md5
      md5: 313f52159881476b321d3cb43016acd3
      size: 139498541
  format_data:
    cmd: python src/data/format_data.py data/raw/smoking_driking_dataset_Ver01.csv
      data/interim/format_data.csv
    deps:
    - path: data/raw/smoking_driking_dataset_Ver01.csv
      hash: md5
      md5: 1b1b7bb3e3f428c250798d7e53fc5ec4
      size: 109561668
    - path: src/data/format_data.py
      hash: md5
      md5: 0f4f1474dca7d8a38a4b431075e52dc6
      size: 1419
    outs:
    - path: data/interim/format_data.csv
      hash: md5
      md5: 08e265a99c3e4c4fd2f847bf00d2952b
      size: 139502223
  handle_outliers:
    cmd: python src/data/handle_outliers.py data/interim/remove_duplicates.csv data/interim/handle_outliers.csv
    deps:
    - path: data/interim/remove_duplicates.csv
      hash: md5
      md5: 313f52159881476b321d3cb43016acd3
      size: 139498541
    - path: src/data/handle_outliers.py
      hash: md5
      md5: c0a2873f33f08feb52a0e86c0f1b4bb7
      size: 1115
    outs:
    - path: data/interim/handle_outliers.csv
      hash: md5
      md5: e664d3f89fd1208b427753a78b7e0c1c
      size: 139606060
